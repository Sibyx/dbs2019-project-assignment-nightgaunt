{% load fieldtype %}

{% for hidden_field in form.hidden_fields %}
	{{ hidden_field }}
{% endfor %}

{% if form.non_field_errors %}
	<div class="alert alert-danger" role="alert">
		{% for error in form.non_field_errors %}
			{{ error }}
		{% endfor %}
	</div>
{% endif %}

{% for field in form.visible_fields %}
	<div class="form-group">
		{{ field.label_tag }}

		{% if form.is_bound %}
			{% if field.errors %}
				{% if field|fieldtype == 'Textarea' %}
					<textarea
						class="form-control is-invalid"
						name="{{ field.html_name }}"
						placeholder="{{ field.label }}"
						id="{{ field.id_for_label }}"
					>{{ field.value|default_if_none:"" }}</textarea>
				{% else %}
					<input
						type="{{ field.field.widget.input_type }}"
						class="form-control is-invalid"
						name="{{ field.html_name }}"
						placeholder="{{ field.label }}"
						value="{{ field.value|default_if_none:"" }}"
						id="{{ field.id_for_label }}"
					>
				{% endif %}

				{% for error in field.errors %}
					<div class="invalid-feedback">
						{{ error }}
					</div>
				{% endfor %}
			{% else %}
				{% if field|fieldtype == 'Textarea' %}
					<textarea
						class="form-control is-valid"
						name="{{ field.html_name }}"
						placeholder="{{ field.label }}"
						id="{{ field.id_for_label }}"
					>{{ field.value|default_if_none:"" }}</textarea>
				{% else %}
					<input
						type="{{ field.field.widget.input_type }}"
						class="form-control is-valid"
						name="{{ field.html_name }}"
						placeholder="{{ field.label }}"
						value="{{ field.value|default_if_none:"" }}"
						id="{{ field.id_for_label }}"
					>
				{% endif %}
			{% endif %}
		{% else %}
			{% if field|fieldtype == 'Textarea' %}
				<textarea
					class="form-control"
					name="{{ field.html_name }}"
					placeholder="{{ field.label }}"
					id="{{ field.id_for_label }}"
				>{{ field.value|default_if_none:"" }}</textarea>
			{% else %}
				<input
					type="{{ field.field.widget.input_type }}"
					class="form-control"
					name="{{ field.html_name }}"
					placeholder="{{ field.label }}"
					value="{{ field.value|default_if_none:"" }}"
					id="{{ field.id_for_label }}"
				>
			{% endif %}
		{% endif %}

		{% if field.help_text %}
			<small class="form-text text-muted">{{ field.help_text }}</small>
		{% endif %}
	</div>
{% endfor %}
