{% extends '_layouts/base.html' %}

{% load i18n %}

{% block title %}{% trans 'Dashboard' %}{% endblock %}

{% block content %}
	<div class="container">

		<div class="row pt-3">
			<div class="col-lg-4">
				<ul class="list-group">
					<li class="list-group-item d-flex justify-content-between align-items-center">
						<a href="{% url 'boxes-overview' %}">
							<i class="fas fa-boxes"></i> {% trans 'Boxes' %}
						</a>
						<span class="badge badge-primary badge-pill">{{ stats.boxes }}</span>
					</li>

					<li class="list-group-item d-flex justify-content-between align-items-center">
						<a href="{% url 'specimens-overview' %}">
							<i class="fas fa-spider"></i> {% trans 'Specimens' %}
						</a>
						<span class="badge badge-primary badge-pill">{{ stats.specimens }}</span>
					</li>

					<li class="list-group-item d-flex justify-content-between align-items-center">
						<span>
							<i class="fas fa-bug"></i> {% trans 'Organisms' %}
						</span>
						<span class="badge badge-primary badge-pill">{{ stats.organisms }}</span>
					</li>

					<li class="list-group-item d-flex justify-content-between align-items-center">
						<span>
							<i class="fas fa-images"></i> {% trans 'Photos' %}
						</span>
						<span class="badge badge-primary badge-pill">{{ stats.photos }}</span>
					</li>

					<li class="list-group-item d-flex justify-content-between align-items-center">
						<span>
							<i class="fas fa-users"></i> {% trans 'Users' %}
						</span>
						<span class="badge badge-primary badge-pill">{{ stats.users }}</span>
					</li>
				</ul>
			</div>

			<div class="col-lg-8">
				<canvas id="databaseEvolutionChart" data-chart-type="line"></canvas>
			</div>
		</div>

		<div class="row justify-content-center">
			<div class="col-lg-6">
				<canvas id="distributionChart" data-chart-type="pie"></canvas>
			</div>
		</div>
	</div>
{% endblock %}

{% block javascript %}
	<script>
		$(window).on('load', function () {
			App.Charts.reload('distributionChart', App.Utils.buildUrl("{% url 'dashboard' %}", {
				chart: 'distributionChart'
			}));

			App.Charts.reload('databaseEvolutionChart', App.Utils.buildUrl("{% url 'dashboard' %}", {
				chart: 'databaseEvolutionChart'
			}));
		});
	</script>
{% endblock %}

